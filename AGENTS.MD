# Python Project Structure

This repository follows a standardized Python project structure based on the ["src" layout](https://packaging.python.org/en/latest/tutorials/packaging-projects/#structuring-your-project).

## Standard Project Layout

```
project/
├── .github/
│   ├── workflows/ci.yml      # CI/CD pipeline
│   └── ISSUE_TEMPLATE/
├── docs/                      # Documentation
├── data/                      # Sample datasets (optional)
├── notebooks/                 # Jupyter notebooks (exploration only)
├── src/
│   └── <package>/            # Python source code
│       ├── __init__.py
│       └── ...
├── tests/                     # Test suite (mirrors src/ structure)
│   └── test_*.py
├── pyproject.toml            # Build system & project metadata
├── uv.lock                   # Locked dependencies (auto-generated by uv)
├── README.md
├── LICENSE
└── CHANGELOG.md
```

## Core Commands

### Environment Setup

- **Install uv**: `curl -LsSf https://astral.sh/uv/install.sh | sh`
- **Create environment and install dependencies**: `uv sync`
- **Activate environment** (optional): `source .venv/bin/activate`
- **Add dependency**: `uv add <package>`
- **Add dev dependency**: `uv add --dev <package>`
- **Update dependencies**: `uv lock --upgrade`
- **Run commands**: `uv run <command>`

### Code Quality

- **Format code**: `uv run ruff format .`
- **Lint code**: `uv run ruff check .`
- **Auto-fix linting issues**: `uv run ruff check --fix .`
- **Type check**: `uv run mypy .`
- **Run all quality checks**: `uv run ruff check . && uv run mypy . && uv run pytest -q`

### Testing

- **Run all tests**: `uv run pytest`
- **Run with coverage**: `uv run pytest --cov=<package>`
- **Run specific test file**: `uv run pytest tests/test_module.py`
- **Run specific test function**: `uv run pytest tests/test_module.py::test_function_name`
- **Stop on first failure**: `uv run pytest -x`
- **Run only failed tests**: `uv run pytest --lf`
- **Generate HTML coverage report**: `uv run pytest --cov=<package> --cov-report=html`
- **Run tests with warnings as errors**: `uv run pytest -W error`

### Documentation

- **Build docs (MkDocs)**: `uv run mkdocs build --strict`
- **Serve docs locally**: `uv run mkdocs serve`
- **Build docs (Sphinx)**: `uv run sphinx-build -W docs docs/_build`
- **Check docstring coverage**: `uv run interrogate -v --fail-under=80 src/`

### Development Workflow

- **Quick verification**: `uv run pytest -q && uv run ruff check . && uv run mypy .`
- **Full quality check**: `uv run pytest --cov=<package> --cov-report=term && uv run ruff check . && uv run mypy . && uv run mkdocs build --strict`

## Commit Message Format

Follow [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**Types**:

- `feat:` - New feature (minor version bump)
- `fix:` - Bug fix (patch version bump)
- `refactor:` - Code refactoring (no version bump)
- `docs:` - Documentation changes (no version bump)
- `test:` - Test additions/changes (no version bump)
- `ci:` - CI/CD changes (no version bump)
- `chore:` - Maintenance tasks (no version bump)

**Breaking changes**: Add `!` after type: `feat!:` or `fix!:` (major version bump)

**Examples**:

```
feat(api): add user authentication endpoint
fix(parser): handle null values in JSON response
docs: update installation instructions
```

## PR Instructions

- **Title format**: `<type>(<scope>): <description>` (follow Conventional Commits)
- **Keep PRs small**: ≤ 300 lines of diff
- **Before submitting**:
  - [ ] Run `pytest --cov=<package>`
  - [ ] Run `ruff check .`
  - [ ] Run `mypy .`
  - [ ] Update documentation
  - [ ] Update CHANGELOG.md
- **All CI checks must pass**: Green status required
- **Address review feedback**: Iterate until approved

## Python Version

Projects require **Python 3.12+** (preferably 3.13+). Check with:

```bash
python --version
```

## Tech Stack

| Tool   | Purpose                          | Version |
| ------ | -------------------------------- | ------- |
| Python | Language                         | 3.13+   |
| pytest | Testing                          | Latest  |
| ruff   | Linting & Formatting             | Latest  |
| mypy   | Type Checking                    | Latest  |
| uv     | Package & Environment Management | Latest  |
